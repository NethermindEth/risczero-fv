import Risc0.Map
import Risc0.MlirTactics
import Risc0.Optimisation
import Risc0.Gadgets.ComputeDecode.Witness.Code

namespace Risc0.ComputeDecode.Witness.Code

open MLIRNotation

def opt1 : MLIRProgram :=
  "%1" ←ₐ .Const 48; "%2" ←ₐ .Const 1981808641; "%3" ←ₐ .Const 64; "%4" ←ₐ .Const 3; "%5" ←ₐ .Const 1509949441; "%6" ←ₐ .Const 12; "%7" ←ₐ .Const 4; "%8" ←ₐ .Const 1; "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩; "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩; "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩; "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩; "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩; "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩; "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩; "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour1 :
  getReturn (full.runProgram st) res =
  getReturn (opt1.runProgram st) res := by
    unfold getReturn MLIR.runProgram full
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt1
    with_reducible rfl

def opt2 : MLIRProgram :=
  "%2" ←ₐ .Const 1981808641; "%3" ←ₐ .Const 64; "%4" ←ₐ .Const 3; "%5" ←ₐ .Const 1509949441; "%6" ←ₐ .Const 12; "%7" ←ₐ .Const 4; "%8" ←ₐ .Const 1; "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩; "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩; "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩; "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩; "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩; "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩; "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour2 :
  getReturn (full.runProgram st) res =
  getReturn (opt2.runProgram st) res := by
    rewrite [optimised_behaviour1]
    unfold getReturn MLIR.runProgram opt1
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt2
    with_reducible rfl

def opt3 : MLIRProgram :=
  "%3" ←ₐ .Const 64; "%4" ←ₐ .Const 3; "%5" ←ₐ .Const 1509949441; "%6" ←ₐ .Const 12; "%7" ←ₐ .Const 4; "%8" ←ₐ .Const 1; "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩; "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩; "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩; "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩; "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩; "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour3 :
  getReturn (full.runProgram st) res =
  getReturn (opt3.runProgram st) res := by
    rewrite [optimised_behaviour2]
    unfold getReturn MLIR.runProgram opt2
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt3
    with_reducible rfl

def opt4 : MLIRProgram :=
  "%4" ←ₐ .Const 3; "%5" ←ₐ .Const 1509949441; "%6" ←ₐ .Const 12; "%7" ←ₐ .Const 4; "%8" ←ₐ .Const 1; "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩; "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩; "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩; "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩; "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour4 :
  getReturn (full.runProgram st) res =
  getReturn (opt4.runProgram st) res := by
    rewrite [optimised_behaviour3]
    unfold getReturn MLIR.runProgram opt3
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt4
    with_reducible rfl

def opt5 : MLIRProgram :=
  "%5" ←ₐ .Const 1509949441; "%6" ←ₐ .Const 12; "%7" ←ₐ .Const 4; "%8" ←ₐ .Const 1; "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩; "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩; "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩; "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour5 :
  getReturn (full.runProgram st) res =
  getReturn (opt5.runProgram st) res := by
    rewrite [optimised_behaviour4]
    unfold getReturn MLIR.runProgram opt4
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt5
    with_reducible rfl

def opt6 : MLIRProgram :=
  "%6" ←ₐ .Const 12; "%7" ←ₐ .Const 4; "%8" ←ₐ .Const 1; "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩; "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩; "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour6 :
  getReturn (full.runProgram st) res =
  getReturn (opt6.runProgram st) res := by
    rewrite [optimised_behaviour5]
    unfold getReturn MLIR.runProgram opt5
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt6
    with_reducible rfl

def opt7 : MLIRProgram :=
  "%7" ←ₐ .Const 4; "%8" ←ₐ .Const 1; "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩; "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour7 :
  getReturn (full.runProgram st) res =
  getReturn (opt7.runProgram st) res := by
    rewrite [optimised_behaviour6]
    unfold getReturn MLIR.runProgram opt6
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt7
    with_reducible rfl

def opt8 : MLIRProgram :=
  "%8" ←ₐ .Const 1; "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩; "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour8 :
  getReturn (full.runProgram st) res =
  getReturn (opt8.runProgram st) res := by
    rewrite [optimised_behaviour7]
    unfold getReturn MLIR.runProgram opt7
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_single (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_single (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt8
    with_reducible rfl

def opt9 : MLIRProgram :=
  "%9" ←ₐ .Const 1006632961; "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩; "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour9 :
  getReturn (full.runProgram st) res =
  getReturn (opt9.runProgram st) res := by
    rewrite [optimised_behaviour8]
    unfold getReturn MLIR.runProgram opt8
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt9
    with_reducible rfl

def opt10 : MLIRProgram :=
  "%10" ←ₐ .Const 6; "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩; "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour10 :
  getReturn (full.runProgram st) res =
  getReturn (opt10.runProgram st) res := by
    rewrite [optimised_behaviour9]
    unfold getReturn MLIR.runProgram opt9
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt10
    with_reducible rfl

def opt11 : MLIRProgram :=
  "%11" ←ₐ .Const 2; "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour11 :
  getReturn (full.runProgram st) res =
  getReturn (opt11.runProgram st) res := by
    rewrite [optimised_behaviour10]
    unfold getReturn MLIR.runProgram opt10
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt11
    with_reducible rfl

def opt12 : MLIRProgram :=
  "%12" ←ₐ .Const 1761607681; "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩; "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour12 :
  getReturn (full.runProgram st) res =
  getReturn (opt12.runProgram st) res := by
    rewrite [optimised_behaviour11]
    unfold getReturn MLIR.runProgram opt11
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_single (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_single (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_single (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (const_past_set (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (const_past_add (by trivial) (by trivial) (by trivial)),opt_swap (const_past_add (by trivial) (by trivial) (by trivial)),opt_swap (const_past_add (by trivial) (by trivial) (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (const_past_add (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt12
    with_reducible rfl

def opt13 : MLIRProgram :=
  "%13" ←ₐ .Const 8; "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩; "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour13 :
  getReturn (full.runProgram st) res =
  getReturn (opt13.runProgram st) res := by
    rewrite [optimised_behaviour12]
    unfold getReturn MLIR.runProgram opt12
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt13
    with_reducible rfl

def opt14 : MLIRProgram :=
  "%14" ←ₐ .Const 1887436801; "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩; "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour14 :
  getReturn (full.runProgram st) res =
  getReturn (opt14.runProgram st) res := by
    rewrite [optimised_behaviour13]
    unfold getReturn MLIR.runProgram opt13
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt14
    with_reducible rfl

def opt15 : MLIRProgram :=
  "%15" ←ₐ .Const 16; "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩; "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour15 :
  getReturn (full.runProgram st) res =
  getReturn (opt15.runProgram st) res := by
    rewrite [optimised_behaviour14]
    unfold getReturn MLIR.runProgram opt14
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt15
    with_reducible rfl

def opt16 : MLIRProgram :=
  "%16" ←ₐ .Const 1950351361; "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩; "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour16 :
  getReturn (full.runProgram st) res =
  getReturn (opt16.runProgram st) res := by
    rewrite [optimised_behaviour15]
    unfold getReturn MLIR.runProgram opt15
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt16
    with_reducible rfl

def opt17 : MLIRProgram :=
  "%17" ←ₐ .Const 96; "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩; "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour17 :
  getReturn (full.runProgram st) res =
  getReturn (opt17.runProgram st) res := by
    rewrite [optimised_behaviour16]
    unfold getReturn MLIR.runProgram opt16
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt17
    with_reducible rfl

def opt18 : MLIRProgram :=
  "%18" ←ₐ .Const 1997537281; "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩; "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour18 :
  getReturn (full.runProgram st) res =
  getReturn (opt18.runProgram st) res := by
    rewrite [optimised_behaviour17]
    unfold getReturn MLIR.runProgram opt17
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (const_past_set (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt18
    with_reducible rfl

def opt19 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour19 :
  getReturn (full.runProgram st) res =
  getReturn (opt19.runProgram st) res := by
    rewrite [optimised_behaviour18]
    unfold getReturn MLIR.runProgram opt18
    rewrite[opt_swap (const_past_const (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap_nondet_seq (const_past_bitAnd (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt19
    with_reducible rfl

def opt20 : MLIRProgram :=
  "%20" ←ₐ .Get ⟨"in"⟩ 0 0; "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; "%19" ←ₐ .Const 128; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩; "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour20 :
  getReturn (full.runProgram st) res =
  getReturn (opt20.runProgram st) res := by
    rewrite [optimised_behaviour19]
    unfold getReturn MLIR.runProgram opt19
    rewrite[opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial)),opt_swap (const_past_get (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt20
    with_reducible rfl

def opt21 : MLIRProgram :=
  "%21" ←ₐ .Get ⟨"in"⟩ 0 1; "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; "%19" ←ₐ .Const 128; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩; "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour21 :
  getReturn (full.runProgram st) res =
  getReturn (opt21.runProgram st) res := by
    rewrite [optimised_behaviour20]
    unfold getReturn MLIR.runProgram opt20
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt21
    with_reducible rfl

def opt22 : MLIRProgram :=
  "%22" ←ₐ .Get ⟨"in"⟩ 0 2; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; "%19" ←ₐ .Const 128; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩; "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour22 :
  getReturn (full.runProgram st) res =
  getReturn (opt22.runProgram st) res := by
    rewrite [optimised_behaviour21]
    unfold getReturn MLIR.runProgram opt21
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt22
    with_reducible rfl

def opt23 : MLIRProgram :=
  "%23" ←ₐ .Get ⟨"in"⟩ 0 3; "%19" ←ₐ .Const 128; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour23 :
  getReturn (full.runProgram st) res =
  getReturn (opt23.runProgram st) res := by
    rewrite [optimised_behaviour22]
    unfold getReturn MLIR.runProgram opt22
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_single (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap_nondet_single (get_past_set_buf (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap_nondet_seq (get_past_bitAnd (by trivial) (by trivial) (by trivial)),opt_swap_nondet_seq (get_past_set_buf (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt23
    with_reducible rfl

def opt24 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour24 :
  getReturn (full.runProgram st) res =
  getReturn (opt24.runProgram st) res := by
    rewrite [optimised_behaviour23]
    unfold getReturn MLIR.runProgram opt23
    rewrite[opt_swap (get_past_const (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt24
    with_reducible rfl

def opt25 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour25 :
  getReturn (full.runProgram st) res =
  getReturn (opt25.runProgram st) res := by
    rewrite [optimised_behaviour24]
    unfold getReturn MLIR.runProgram opt24
    rewrite[MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def]
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt25
    with_reducible rfl

def opt26 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%7" ←ₐ .Const 4; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour26 :
  getReturn (full.runProgram st) res =
  getReturn (opt26.runProgram st) res := by
    rewrite [optimised_behaviour25]
    unfold getReturn MLIR.runProgram opt25
    rewrite[MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def]
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_const (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt26
    with_reducible rfl

def opt27 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%7" ←ₐ .Const 4; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour27 :
  getReturn (full.runProgram st) res =
  getReturn (opt27.runProgram st) res := by
    rewrite [optimised_behaviour26]
    unfold getReturn MLIR.runProgram opt26
    rewrite[MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def]
    rewrite[opt_swap (get_past_const (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt27
    with_reducible rfl

def opt28 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%7" ←ₐ .Const 4; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour28 :
  getReturn (full.runProgram st) res =
  getReturn (opt28.runProgram st) res := by
    rewrite [optimised_behaviour27]
    unfold getReturn MLIR.runProgram opt27
    rewrite[MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def]
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt28
    with_reducible rfl

def opt29 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%7" ←ₐ .Const 4; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour29 :
  getReturn (full.runProgram st) res =
  getReturn (opt29.runProgram st) res := by
    rewrite [optimised_behaviour28]
    unfold getReturn MLIR.runProgram opt28
    rewrite[MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def]
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt29
    with_reducible rfl

def opt30 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%7" ←ₐ .Const 4; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour30 :
  getReturn (full.runProgram st) res =
  getReturn (opt30.runProgram st) res := by
    rewrite [optimised_behaviour29]
    unfold getReturn MLIR.runProgram opt29
    rewrite[MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def]
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial)),opt_swap (get_past_add (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt30
    with_reducible rfl

def opt31 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%7" ←ₐ .Const 4; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour31 :
  getReturn (full.runProgram st) res =
  getReturn (opt31.runProgram st) res := by
    rewrite [optimised_behaviour30]
    unfold getReturn MLIR.runProgram opt30
    rewrite[MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def]
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt31
    with_reducible rfl

def opt32 : MLIRProgram :=
  "%19" ←ₐ .Const 128; "%23" ←ₐ .Get ⟨"in"⟩ 0 3; nondet ( "%74" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%19"⟩ ); "%18" ←ₐ .Const 1997537281; nondet ( "%75" ←ₐ .Mul ⟨"%74"⟩ ⟨"%18"⟩; ⟨"data"⟩[10] ←ᵢ ⟨"%75"⟩ ); "%17" ←ₐ .Const 96; nondet ( "%76" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%17"⟩ ); "%16" ←ₐ .Const 1950351361; nondet ( "%77" ←ₐ .Mul ⟨"%76"⟩ ⟨"%16"⟩; ⟨"data"⟩[1] ←ᵢ ⟨"%77"⟩ ); "%15" ←ₐ .Const 16; nondet ( "%78" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%15"⟩ ); "%14" ←ₐ .Const 1887436801; nondet ( "%79" ←ₐ .Mul ⟨"%78"⟩ ⟨"%14"⟩; ⟨"data"⟩[9] ←ᵢ ⟨"%79"⟩ ); "%13" ←ₐ .Const 8; nondet ( "%80" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%13"⟩ ); "%12" ←ₐ .Const 1761607681; nondet ( "%81" ←ₐ .Mul ⟨"%80"⟩ ⟨"%12"⟩; ⟨"data"⟩[8] ←ᵢ ⟨"%81"⟩ ); "%10" ←ₐ .Const 6; nondet ( "%82" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%10"⟩ ); "%9" ←ₐ .Const 1006632961; nondet ( "%83" ←ₐ .Mul ⟨"%82"⟩ ⟨"%9"⟩; ⟨"data"⟩[0] ←ᵢ ⟨"%83"⟩ ); "%8" ←ₐ .Const 1; nondet ( "%84" ←ₐ .BitAnd ⟨"%23"⟩ ⟨"%8"⟩; ⟨"data"⟩[13] ←ᵢ ⟨"%84"⟩ ); "%22" ←ₐ .Get ⟨"in"⟩ 0 2; nondet ( "%85" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%19"⟩; "%86" ←ₐ .Mul ⟨"%85"⟩ ⟨"%18"⟩; ⟨"data"⟩[12] ←ᵢ ⟨"%86"⟩; "%87" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%17"⟩; "%88" ←ₐ .Mul ⟨"%87"⟩ ⟨"%16"⟩; ⟨"data"⟩[2] ←ᵢ ⟨"%88"⟩; "%89" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%15"⟩; "%90" ←ₐ .Mul ⟨"%89"⟩ ⟨"%14"⟩; ⟨"data"⟩[11] ←ᵢ ⟨"%90"⟩ ); "%6" ←ₐ .Const 12; nondet ( "%91" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%6"⟩ ); "%5" ←ₐ .Const 1509949441; nondet ( "%92" ←ₐ .Mul ⟨"%91"⟩ ⟨"%5"⟩; ⟨"data"⟩[4] ←ᵢ ⟨"%92"⟩ ); "%4" ←ₐ .Const 3; nondet ( "%93" ←ₐ .BitAnd ⟨"%22"⟩ ⟨"%4"⟩; ⟨"data"⟩[3] ←ᵢ ⟨"%93"⟩ ); "%21" ←ₐ .Get ⟨"in"⟩ 0 1; nondet ( "%94" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%19"⟩; "%95" ←ₐ .Mul ⟨"%94"⟩ ⟨"%18"⟩; ⟨"data"⟩[14] ←ᵢ ⟨"%95"⟩ ); "%3" ←ₐ .Const 64; nondet ( "%96" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%3"⟩ ); "%2" ←ₐ .Const 1981808641; nondet ( "%97" ←ₐ .Mul ⟨"%96"⟩ ⟨"%2"⟩; ⟨"data"⟩[15] ←ᵢ ⟨"%97"⟩ ); "%1" ←ₐ .Const 48; nondet ( "%98" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%1"⟩; "%99" ←ₐ .Mul ⟨"%98"⟩ ⟨"%14"⟩; ⟨"data"⟩[5] ←ᵢ ⟨"%99"⟩; "%100" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%6"⟩; "%101" ←ₐ .Mul ⟨"%100"⟩ ⟨"%5"⟩; ⟨"data"⟩[7] ←ᵢ ⟨"%101"⟩; "%102" ←ₐ .BitAnd ⟨"%21"⟩ ⟨"%4"⟩; ⟨"data"⟩[6] ←ᵢ ⟨"%102"⟩ ); "%20" ←ₐ .Get ⟨"in"⟩ 0 0; nondet ( "%103" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%19"⟩; "%104" ←ₐ .Mul ⟨"%103"⟩ ⟨"%18"⟩; ⟨"data"⟩[16] ←ᵢ ⟨"%104"⟩ ); "%0" ←ₐ .Const 127; nondet ( "%105" ←ₐ .BitAnd ⟨"%20"⟩ ⟨"%0"⟩; ⟨"data"⟩[17] ←ᵢ ⟨"%105"⟩ ); "%7" ←ₐ .Const 4; "%26" ←ₐ .Get ⟨"data"⟩ 0 8; "%27" ←ₐ .Mul ⟨"%26"⟩ ⟨"%7"⟩; "%28" ←ₐ .Get ⟨"data"⟩ 0 9; "%29" ←ₐ .Mul ⟨"%28"⟩ ⟨"%13"⟩; "%30" ←ₐ .Get ⟨"data"⟩ 0 1; "%31" ←ₐ .Mul ⟨"%30"⟩ ⟨"%15"⟩; "%32" ←ₐ .Add ⟨"%31"⟩ ⟨"%29"⟩; "%33" ←ₐ .Add ⟨"%32"⟩ ⟨"%27"⟩; "%25" ←ₐ .Get ⟨"data"⟩ 0 0; "%34" ←ₐ .Add ⟨"%33"⟩ ⟨"%25"⟩; "%35" ←ₐ .Get ⟨"data"⟩ 0 10; "%36" ←ₐ .Mul ⟨"%35"⟩ ⟨"%3"⟩; "%37" ←ₐ .Add ⟨"%36"⟩ ⟨"%34"⟩; "%11" ←ₐ .Const 2; "%38" ←ₐ .Mul ⟨"%37"⟩ ⟨"%11"⟩; "%24" ←ₐ .Get ⟨"data"⟩ 0 13; "%39" ←ₐ .Add ⟨"%38"⟩ ⟨"%24"⟩; "%40" ←ₐ .Sub ⟨"%23"⟩ ⟨"%39"⟩; ?₀ ⟨"%40"⟩; "%42" ←ₐ .Get ⟨"data"⟩ 0 4; "%43" ←ₐ .Mul ⟨"%42"⟩ ⟨"%7"⟩; "%45" ←ₐ .Get ⟨"data"⟩ 0 2; "%46" ←ₐ .Mul ⟨"%45"⟩ ⟨"%11"⟩; "%47" ←ₐ .Get ⟨"data"⟩ 0 12; "%48" ←ₐ .Mul ⟨"%47"⟩ ⟨"%13"⟩; "%49" ←ₐ .Add ⟨"%48"⟩ ⟨"%46"⟩; "%44" ←ₐ .Get ⟨"data"⟩ 0 11; "%50" ←ₐ .Add ⟨"%49"⟩ ⟨"%44"⟩; "%51" ←ₐ .Mul ⟨"%50"⟩ ⟨"%15"⟩; "%52" ←ₐ .Add ⟨"%51"⟩ ⟨"%43"⟩; "%41" ←ₐ .Get ⟨"data"⟩ 0 3; "%53" ←ₐ .Add ⟨"%52"⟩ ⟨"%41"⟩; "%54" ←ₐ .Sub ⟨"%22"⟩ ⟨"%53"⟩; ?₀ ⟨"%54"⟩; "%56" ←ₐ .Get ⟨"data"⟩ 0 7; "%57" ←ₐ .Mul ⟨"%56"⟩ ⟨"%7"⟩; "%59" ←ₐ .Get ⟨"data"⟩ 0 15; "%60" ←ₐ .Mul ⟨"%59"⟩ ⟨"%7"⟩; "%58" ←ₐ .Get ⟨"data"⟩ 0 5; "%61" ←ₐ .Add ⟨"%60"⟩ ⟨"%58"⟩; "%62" ←ₐ .Mul ⟨"%61"⟩ ⟨"%15"⟩; "%63" ←ₐ .Get ⟨"data"⟩ 0 14; "%64" ←ₐ .Mul ⟨"%63"⟩ ⟨"%19"⟩; "%65" ←ₐ .Add ⟨"%64"⟩ ⟨"%62"⟩; "%66" ←ₐ .Add ⟨"%65"⟩ ⟨"%57"⟩; "%55" ←ₐ .Get ⟨"data"⟩ 0 6; "%67" ←ₐ .Add ⟨"%66"⟩ ⟨"%55"⟩; "%68" ←ₐ .Sub ⟨"%21"⟩ ⟨"%67"⟩; ?₀ ⟨"%68"⟩; "%70" ←ₐ .Get ⟨"data"⟩ 0 16; "%71" ←ₐ .Mul ⟨"%70"⟩ ⟨"%19"⟩; "%69" ←ₐ .Get ⟨"data"⟩ 0 17; "%72" ←ₐ .Add ⟨"%71"⟩ ⟨"%69"⟩; "%73" ←ₐ .Sub ⟨"%20"⟩ ⟨"%72"⟩; ?₀ ⟨"%73"⟩
lemma optimised_behaviour32 :
  getReturn (full.runProgram st) res =
  getReturn (opt32.runProgram st) res := by
    rewrite [optimised_behaviour31]
    unfold getReturn MLIR.runProgram opt31
    rewrite[MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,step_nondet,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def,MLIR.run_seq_def]
    rewrite[opt_swap (get_past_get_offset (by trivial) (by trivial)),opt_swap (get_past_mul (by trivial) (by trivial) (by trivial))]
    simp only [←MLIR.run_nondet]
    rewrite [←MLIR.run_seq_def]
    rewrite[←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←step_nondet,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def,←MLIR.run_seq_def]
    apply optim_rfl_hic_sunt_dracones
    unfold opt32
    with_reducible rfl

def opt_full : MLIRProgram := opt32
lemma opt_full_def : opt_full = opt32 := rfl
lemma optimised_behaviour_full :
  getReturn (full.runProgram st) res =
  getReturn (opt_full.runProgram st) res := by
  rewrite [optimised_behaviour32]
  rw [opt_full]
end Risc0.ComputeDecode.Witness.Code